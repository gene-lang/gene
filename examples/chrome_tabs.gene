#!/usr/bin/env gene run

(var output (gene/os/exec "examples/chrome_tabs.scpt"))
(var rows (gene/csv/parse output))
(if ($args/.size > 0)
  (var filter $args/0/.to_lower_case)
  (rows = (rows .filter (row ->
    ((row/2/.to_lower_case .contains filter) || (row/3/.to_lower_case .contains filter))
  )))
)
(for row in rows
  (println row)
)
